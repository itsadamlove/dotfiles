
# ====================== General Serring ========================

# Enable mouse mode
set -g mouse on

# Fix mode deplay switching issue
set -sg escape-time 0

# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows after a change
set-option -g renumber-windows on

# Enable true color mode
set -ga terminal-overrides ',*:Tc'
#set -g default-terminal "tmux-256color"
set -g default-terminal "xterm-256color"

# Set up copy and paste to work between tmux and system keyboard and vim all nicely
# (brew install reattach-to-user-namespace)
set-option -g default-command "reattach-to-user-namespace -l zsh"

# New window with default path set to last path
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# Dont rename after name is set
set-option -g allow-rename off


# set-option -g status-position bottom
# set-window-option -g xterm-keys on

# ===================  Plugins ========================
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-battery'

# ======================  Keys ========================

# Set prefix to Ctrl-Space
unbind C-b
#set-option -g prefix C-a
set -g prefix C-Space
bind Space send-prefix

# Show and hide the tmux status
bind-key -n S-Up set-option -g status
bind-key -n S-Down set-option -g status

# Shorcut to switch windows - Remap this to shift control hjkl
bind-key -n C-H previous-window
bind-key -n C-L next-window

# Remap window navigation to vim
unbind-key j
bind-key j select-pane -D
unbind-key k
bind-key k select-pane -U
unbind-key h
bind-key h select-pane -L
unbind-key l
bind-key l select-pane -R

# smart pane switching with awareness of vim splits
bind -n C-h run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
bind -n C-j run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
bind -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"
bind -n C-l run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"
bind -n C-\ run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys 'C-\\') || tmux select-pane -l"

# Bind Control Numbers to window selection
bind-key -n C-0 select-window -t :0
bind-key -n C-1 select-window -t :1
bind-key -n C-2 select-window -t :2
bind-key -n C-3 select-window -t :3
bind-key -n C-4 select-window -t :4
bind-key -n C-5 select-window -t :5
bind-key -n C-6 select-window -t :6
bind-key -n C-7 select-window -t :7
bind-key -n C-8 select-window -t :8
bind-key -n C-9 select-window -t :9


# ====================  Visual Configuration ======================

## COLORSCHEME: gruvbox dark
set-option -g status "on"

# default statusbar colors
set-option -g status-bg colour236 #bg1
set-option -g status-fg colour244 #colour253 #fg1

# default window title colors
set-window-option -g window-status-bg colour103 #blue
set-window-option -g window-status-fg colour236 #bg1

set-window-option -g window-status-activity-bg colour236 #bg1
set-window-option -g window-status-activity-fg colour248 #fg3

# active window title colors
set-window-option -g window-status-current-bg colour103#default
set-window-option -g window-status-current-fg colour236# #bg1

# pane border
set-option -g pane-active-border-fg colour250 #fg2
set-option -g pane-border-fg colour236 #bg1

# message infos
set-option -g message-bg colour239 #bg2
set-option -g message-fg colour253 #fg1

# writting commands inactive
set-option -g message-command-bg colour239 #fg3
set-option -g message-command-fg colour253 #bg1

# pane number display
set-option -g display-panes-active-colour colour253 #fg2
set-option -g display-panes-colour colour236 #bg1

# clock
set-window-option -g clock-mode-colour colour103 #cyan

# bell
set-window-option -g window-status-bell-style fg=colour235,bg=colour167 #bg, red


## Theme settings mixed with colors (unfortunately, but there is no cleaner way)
set-option -g status-attr "none"
set-option -g status-justify "left"
set-option -g status-left-attr "none"
set-option -g status-left-length "80"
set-option -g status-right-attr "none"
set-option -g status-right-length "80"
set-window-option -g window-status-activity-attr "none"
set-window-option -g window-status-attr "none"
set-window-option -g window-status-separator ""


set-option -g status-left "#[fg=colour244, bg=colour236] #S #[fg=colour236, bg=colour236, nobold, noitalics, nounderscore]"
set-option -g status-right "%Y-%m-%d #[fg=colour239, bg=colour236, nobold, nounderscore, noitalics]#[fg=colour248,bg=colour239] %H:%M #[fg=colour246, bg=colour239, nobold, noitalics, nounderscore]#[fg=colour236, bg=colour246] #h @ #{battery_percentage} "

set-window-option -g window-status-current-format "#[fg=colour239, bg=colour248, :nobold, noitalics, nounderscore]#[fg=colour236, bg=colour103] #I #[fg=colour236, bg=colour103, bold] #W #[fg=colour103, bg=colour236, nobold, noitalics, nounderscore]"

set-window-option -g window-status-format "#[fg=colour236,bg=colour239,noitalics]#[fg=colour253,bg=colour239] #I #[fg=colour253, bg=colour239] #W #[fg=colour239, bg=colour236, noitalics]"


# Copy of lightling theme (jellybeans) colours
# let s:base03 = [ '#151513', 233 ]
# let s:base02 = [ '#30302c', 236 ]
# let s:base01 = [ '#4e4e43', 239 ]
# let s:base00 = [ '#666656', 242  ]
# let s:base0 = [ '#808070', 244 ]
# let s:base1 = [ '#949484', 246 ]
# let s:base2 = [ '#a8a897', 248 ]
# let s:base3 = [ '#e8e8d3', 253 ]
# let s:yellow = [ '#ffb964', 215 ]
# let s:orange = [ '#fad07a', 222 ]
# let s:red = [ '#cf6a4c', 167 ]
# let s:magenta = [ '#f0a0c0', 217 ]
# let s:blue = [ '#8197bf', 103 ]
# let s:cyan = [ '#8fbfdc', 110 ]
# let s:green = [ '#99ad6a', 107 ]

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
